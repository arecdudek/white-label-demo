services:
    repo.factory:
        class: WL\AppBundle\Lib\RepositoryFactory
        arguments: [@service_container]

    repo.products:
        factory_service: repo.factory
        class: Nokaut\ApiKit\Repository\ProductsRepository
        factory_method: getProductsRepository
    repo.products.async:
        factory_service: repo.factory
        class: WL\AppBundle\Repository\ProductsAsyncRepository
        factory_method: getProductsAsyncRepository

    repo.categories:
        factory_service: repo.factory
        class: Nokaut\ApiKit\Repository\CategoriesRepository
        factory_method: getCategoriesRepository
    repo.categories.async:
        factory_service: repo.factory
        class: Nokaut\ApiKit\Repository\CategoriesAsyncRepository
        factory_method: getCategoriesAsyncRepository

    repo.offers:
        factory_service: repo.factory
        class: Nokaut\ApiKit\Repository\OffersRepository
        factory_method: getOffersRepository
    repo.offers.async:
        factory_service: repo.factory
        class: Nokaut\ApiKit\Repository\OffersAsyncRepository
        factory_method: getOffersAsyncRepository

    repo.async:
        factory_service: repo.factory
        class: Nokaut\ApiKit\Repository\AsyncRepository
        factory_method: getAsyncRepository

    categories.allowed:
        class: WL\AppBundle\Lib\CategoriesAllowed
        arguments: [%categories%]

    menu.main:
        factory_class: WL\AppBundle\Lib\MenuBuilder
        class: array
        factory_method: buildMenu
        arguments: [@repo.categories, @categories.allowed]

    pre.fetchs:
        class: WL\AppBundle\Lib\Listener\PreAsyncFetchListener
        arguments: [@service_container]
        tags:
          - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }

    photo.url:
        class: Nokaut\ApiKit\Helper\PhotoUrl

    cache.memcache:
        class: WL\AppBundle\Lib\Cache\Memcache
        arguments: [%memcache_url%, %memcache_port%, %cache_default_lifetime%, %cache_enabled%]

    helper.filter:
        class: WL\AppBundle\Lib\Helper\SelectedFilter


